# Downloading dotfiles repository and create symlinks
- name: download dotfile repository
  become: no
  git:
    repo: https://github.com/axnion/dotfiles.git
    dest: ~/dotfiles

- name: getting .bashrc status
  become: no
  stat:
    path: ~/.bashrc
  register: sym

- name: removing .bashrc if not symlink
  become: no
  file:
    path: ~/.bashrc
    state: absent
  when: not sym.stat.islnk

- name: creating symlink .bashrc
  become: no
  file:
    src: ~/dotfiles/bashrc
    dest: ~/.bashrc
    owner: axnion
    state: link

- name: creating symlink .nanorc
  become: no
  file:
    src: ~/dotfiles/nanorc
    dest: ~/.nanorc
    owner: axnion
    state: link

- name: creating symlink .tmux.conf
  become: no
  file:
    src: ~/dotfiles/tmux.conf
    dest: ~/.tmux.conf
    owner: axnion
    state: link

- name: creating symlink .vimrc
  become: no
  file:
    src: ~/dotfiles/vimrc
    dest: ~/.vimrc
    owner: axnion
    state: link

- name: create github ssh key
  become: no
  user:
    name: axnion
    generate_ssh_key: yes
    ssh_key_bits: 2048
    ssh_key_file: .ssh/github